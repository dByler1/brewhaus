import{d as g,r as _,u as $,c as w,a as l,b as D,e as v,f as u,t,F as C,g as L,h as k,o as r,L as b,_ as B,w as x,i as P,j as V,k as I}from"./index-DNe4dZGv.js";const S="PBeBW1DgXevPwYaAIuYKQfepBXm6uSx4",j=({breweryLat:m,breweryLong:o,userLat:e,userLong:i})=>{const n=`https://api.tomtom.com/routing/1/calculateRoute/${e}%2C${i}%3A${m}%2C${o}/json?instructionsType=text&traffic=true&avoid=unpavedRoads&travelMode=car&vehicleCommercial=false&key=${S}`;return new Promise((c,s)=>{fetch(n).then(function(d){d.ok?d.json().then(function(a){c(a)}):s("Error fetching directions")}).catch(function(){s("Error fetching directions")})})},E={key:0,class:"directions"},F={key:1,class:"instructions"},N={key:3},R=g({__name:"DirectionsComponent",props:{brewery:{type:Object,required:!0}},setup(m){const o=m,e=_([]),i=_(0),n=_(!1),c=_(""),s=$();function d(){var h,p;n.value=!0,c.value="",j({breweryLat:o.brewery.latitude,breweryLong:o.brewery.longitude,userLat:((h=s.location)==null?void 0:h.latitude)??0,userLong:((p=s.location)==null?void 0:p.longitude)??0}).then(f=>{e.value=f.routes[0].guidance.instructions,i.value=f.routes[0].summary.lengthInMeters}).catch(f=>{c.value=f.message}).finally(()=>{n.value=!1})}function a(){navigator.geolocation.getCurrentPosition(h=>{s.setLocation({latitude:h.coords.latitude,longitude:h.coords.longitude}),d()})}const y=w(()=>s.location&&o.brewery.latitude&&o.brewery.longitude);return y.value&&d(),(h,p)=>y.value?(r(),l("div",E,[D(s).location?v("",!0):(r(),l("button",{key:0,onClick:a,class:"primary"},"Get Directions")),e.value.length>0?(r(),l("div",F,[p[0]||(p[0]=u("h2",null,"Directions",-1)),u("p",null,"From your location to "+t(o.brewery.name)+" it is "+t(i.value)+" meters",1),u("ul",null,[(r(!0),l(C,null,L(e.value,f=>(r(),l("li",{key:f.message},t(f.message),1))),128))])])):v("",!0),n.value?(r(),k(b,{key:2,class:"spinner"})):v("",!0),c.value?(r(),l("p",N,t(c.value),1)):v("",!0)])):v("",!0)}}),A=B(R,[["__scopeId","data-v-5972e3bd"]]),M={class:"post"},W={key:1,class:"error"},X={key:2,class:"content"},Y={class:"address-line-2"},q=["href"],G=["href"],K=g({__name:"BreweryView",setup(m){const o=V(),e=_(),i=_(!1),n=_(null);x(()=>o.params.id,()=>{c(o.params.id)},{immediate:!0});function c(d){n.value=null,i.value=!0,I(d).then(a=>{typeof a!="string"&&(e.value=a)}).catch(a=>{n.value=a}).finally(()=>{i.value=!1})}const s=w(()=>e.value?e.value.phone.replace(/(\d{3})(\d{3})(\d{4})/,"($1) $2-$3"):"");return(d,a)=>(r(),l("div",M,[i.value?(r(),k(b,{key:0})):v("",!0),n.value?(r(),l("div",W,t(n.value),1)):v("",!0),e.value?(r(),l("div",X,[u("h1",null,t(e.value.name),1),u("address",null,[u("p",null,t(e.value.street),1),u("p",Y,t(e.value.city)+", "+t(e.value.state)+" "+t(e.value.postal_code),1),u("a",{href:e.value.phone},t(s.value),9,q),u("a",{href:e.value.website_url,rel:"noopener noreferrer",target:"_blank"},"Website",8,G)]),P(A,{brewery:e.value},null,8,["brewery"])])):v("",!0)]))}}),Q=B(K,[["__scopeId","data-v-50e6ae08"]]);export{Q as default};
