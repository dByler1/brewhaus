import{d as g,r as f,u as $,c as w,a as o,b as D,e as u,f as _,t as r,F as C,g as L,h as k,o as t,L as b,_ as B,w as x,i as P,j as V,k as I}from"./index-Dm0f7CLK.js";const S=({breweryLat:m,breweryLong:n,userLat:e,userLong:i})=>{const s=`https://api.tomtom.com/routing/1/calculateRoute/${e}%2C${i}%3A${m}%2C${n}/json?instructionsType=text&traffic=true&avoid=unpavedRoads&travelMode=car&vehicleCommercial=false&key=PBeBW1DgXevPwYaAIuYKQfepBXm6uSx4`;return new Promise((c,a)=>{fetch(s).then(function(d){d.ok?d.json().then(function(l){c(l)}):a("Error fetching directions")}).catch(function(){a("Error fetching directions")})})},j={key:0,class:"directions"},E={key:1,class:"instructions"},F={key:3},N=g({__name:"DirectionsComponent",props:{brewery:{type:Object,required:!0}},setup(m){const n=m,e=f([]),i=f(0),s=f(!1),c=f(""),a=$();function d(){var h,p;s.value=!0,c.value="",S({breweryLat:n.brewery.latitude,breweryLong:n.brewery.longitude,userLat:((h=a.location)==null?void 0:h.latitude)??0,userLong:((p=a.location)==null?void 0:p.longitude)??0}).then(v=>{e.value=v.routes[0].guidance.instructions,i.value=v.routes[0].summary.lengthInMeters}).catch(v=>{c.value=v.message}).finally(()=>{s.value=!1})}function l(){navigator.geolocation.getCurrentPosition(h=>{a.setLocation({latitude:h.coords.latitude,longitude:h.coords.longitude}),d()})}const y=w(()=>a.location&&n.brewery.latitude&&n.brewery.longitude);return y.value&&d(),(h,p)=>y.value?(t(),o("div",j,[D(a).location?u("",!0):(t(),o("button",{key:0,onClick:l,class:"primary"},"Get Directions")),e.value.length>0?(t(),o("div",E,[p[0]||(p[0]=_("h2",null,"Directions",-1)),_("p",null,"From your location to "+r(n.brewery.name)+" it is "+r(i.value)+" meters",1),_("ul",null,[(t(!0),o(C,null,L(e.value,v=>(t(),o("li",{key:v.message},r(v.message),1))),128))])])):u("",!0),s.value?(t(),k(b,{key:2,class:"spinner"})):u("",!0),c.value?(t(),o("p",F,r(c.value),1)):u("",!0)])):u("",!0)}}),R=B(N,[["__scopeId","data-v-5972e3bd"]]),A={class:"post"},M={key:1,class:"error"},W={key:2,class:"content"},X={class:"address-line-2"},Y=["href"],q=["href"],G=g({__name:"BreweryView",setup(m){const n=V(),e=f(),i=f(!1),s=f(null);x(()=>n.params.id,()=>{c(n.params.id)},{immediate:!0});function c(d){s.value=null,i.value=!0,I(d).then(l=>{typeof l!="string"&&(e.value=l)}).catch(l=>{s.value=l}).finally(()=>{i.value=!1})}const a=w(()=>e.value?e.value.phone.replace(/(\d{3})(\d{3})(\d{4})/,"($1) $2-$3"):"");return(d,l)=>(t(),o("div",A,[i.value?(t(),k(b,{key:0})):u("",!0),s.value?(t(),o("div",M,r(s.value),1)):u("",!0),e.value?(t(),o("div",W,[_("h1",null,r(e.value.name),1),_("address",null,[_("p",null,r(e.value.street),1),_("p",X,r(e.value.city)+", "+r(e.value.state)+" "+r(e.value.postal_code),1),e.value.phone?(t(),o("a",{key:0,href:e.value.phone},r(a.value),9,Y)):u("",!0),e.value.website_url?(t(),o("a",{key:1,href:e.value.website_url,rel:"noopener noreferrer",target:"_blank"},"Website",8,q)):u("",!0)]),P(R,{brewery:e.value},null,8,["brewery"])])):u("",!0)]))}}),O=B(G,[["__scopeId","data-v-734c20ed"]]);export{O as default};
