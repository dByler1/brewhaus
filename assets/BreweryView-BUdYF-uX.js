import{d as g,r as v,u as B,c as w,a as r,b as C,e as i,f as _,t as n,F as D,g as L,h as k,o,L as b,_ as $,w as x,i as I,j as P,k as V}from"./index-mTOMEjFx.js";const A="PBeBW1DgXevPwYaAIuYKQfepBXm6uSx4",R=({breweryLat:y,breweryLong:s,userLat:e,userLong:c})=>{const a=`https://api.tomtom.com/routing/1/calculateRoute/${e}%2C${c}%3A${y}%2C${s}/json?instructionsType=text&traffic=true&avoid=unpavedRoads&travelMode=car&vehicleCommercial=false&key=${A}`;return new Promise((d,u)=>{fetch(a).then(function(f){f.ok?f.json().then(function(h){d(h)}):u("Error fetching directions")}).catch(function(){u("Error fetching directions")})})},S={key:0,class:"directions"},j={key:1,class:"instructions"},E={key:3},F=g({__name:"DirectionsComponent",props:{brewery:{type:Object,required:!0}},setup(y){const s=y,e=v([]),c=v(0),a=v(!1),d=v(""),u=B();function f(){var t,m;a.value=!0,d.value="",R({breweryLat:s.brewery.latitude,breweryLong:s.brewery.longitude,userLat:((t=u.location)==null?void 0:t.latitude)??0,userLong:((m=u.location)==null?void 0:m.longitude)??0}).then(p=>{e.value=p.routes[0].guidance.instructions,c.value=p.routes[0].summary.lengthInMeters}).catch(p=>{d.value=p.message}).finally(()=>{a.value=!1})}function h(){navigator.geolocation.getCurrentPosition(t=>{u.setLocation({latitude:t.coords.latitude,longitude:t.coords.longitude}),f()})}const l=w(()=>s.brewery.latitude&&s.brewery.longitude);return l.value&&u.location&&f(),(t,m)=>l.value?(o(),r("div",S,[C(u).location?i("",!0):(o(),r("button",{key:0,onClick:h,class:"primary"},"Get Directions")),e.value.length>0?(o(),r("div",j,[m[0]||(m[0]=_("h2",null,"Directions",-1)),_("p",null,"From your location to "+n(s.brewery.name)+" it is "+n(c.value)+" meters",1),_("ul",null,[(o(!0),r(D,null,L(e.value,p=>(o(),r("li",{key:p.message},n(p.message),1))),128))])])):i("",!0),a.value?(o(),k(b,{key:2,class:"spinner"})):i("",!0),d.value?(o(),r("p",E,n(d.value),1)):i("",!0)])):i("",!0)}}),N=$(F,[["__scopeId","data-v-83fd14a0"]]),M={class:"post"},W={key:1,class:"error"},X={key:2,class:"content"},Y={class:"address-line-2"},q=["href"],G=["href"],K=g({__name:"BreweryView",setup(y){const s=P(),e=v(),c=v(!1),a=v(null),d=v("");x(()=>s.params.id,()=>{f(s.params.id)},{immediate:!0});function u(l){d.value=encodeURIComponent(`${l.street}, ${l.city}, ${l.state} ${l.postal_code}`)}function f(l){a.value=null,c.value=!0,V(l).then(t=>{typeof t!="string"&&(e.value=t,u(t))}).catch(t=>{a.value=t}).finally(()=>{c.value=!1})}const h=w(()=>e.value&&e.value.phone?e.value.phone.replace(/(\d{3})(\d{3})(\d{4})/,"($1) $2-$3"):"");return(l,t)=>(o(),r("div",M,[c.value?(o(),k(b,{key:0})):i("",!0),a.value?(o(),r("div",W,n(a.value),1)):i("",!0),e.value?(o(),r("div",X,[_("h1",null,n(e.value.name),1),_("address",null,[_("p",null,n(e.value.street),1),_("p",Y,n(e.value.city)+", "+n(e.value.state)+" "+n(e.value.postal_code),1),e.value.phone?(o(),r("a",{key:0,href:e.value.phone},n(h.value),9,q)):i("",!0),e.value.website_url?(o(),r("a",{key:1,href:e.value.website_url,rel:"noopener noreferrer",target:"_blank"},"Website",8,G)):i("",!0)]),I(N,{brewery:e.value},null,8,["brewery"])])):i("",!0)]))}}),Q=$(K,[["__scopeId","data-v-96f6bd91"]]);export{Q as default};
